{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/alexiastandish/Desktop/Freelance Clients/NewportMed/newportmed/components/contact-section/contact-form/form/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport DeepDiff from 'deep-diff';\nimport classNames from 'classnames';\n\nclass Form extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"validateAllFields\", (schema, fields) => {\n      try {\n        schema.validateSync(fields, {\n          abortEarly: false\n        });\n        return null;\n      } catch (err) {\n        const errors = err.inner.reduce((acc, currentError) => {\n          if (acc[currentError.params.path]) {\n            acc[currentError.params.path].push(currentError.message);\n            return acc;\n          } else {\n            acc[currentError.params.path] = [currentError.message];\n            return acc;\n          }\n        }, {});\n        return _Object$keys(errors).length > 0 ? errors : null;\n      }\n    });\n\n    _defineProperty(this, \"validatePrevFields\", (schema, fields) => {\n      try {\n        schema.validateSync(fields, {\n          abortEarly: false\n        });\n        return null;\n      } catch (err) {\n        const errors = err.inner.reduce((acc, currentError) => {\n          if (!this.state.prevErrors[currentError.params.path]) {\n            return acc;\n          }\n\n          if (acc[currentError.params.path]) {\n            acc[currentError.params.path].push(currentError.message);\n            return acc;\n          } else {\n            acc[currentError.params.path] = [currentError.message];\n            return acc;\n          }\n        }, {});\n        return _Object$keys(errors).length > 0 ? errors : null;\n      }\n    });\n\n    _defineProperty(this, \"submitFormWithValidation\", () => {\n      const errors = this.validateAllFields(this.props.validationSchema, this.props.fields);\n\n      if (!errors) {\n        return this.props.submitForm();\n      }\n\n      this.setState({\n        errors,\n        prevErrors: errors\n      });\n    });\n\n    this.state = {\n      errors: null,\n      prevErrors: {}\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const errors = this.validatePrevFields(this.props.validationSchema, this.props.fields);\n    const errDiff = DeepDiff(errors, this.state.errors);\n\n    if (errDiff) {\n      this.setState({\n        errors\n      });\n    }\n  }\n\n  render() {\n    const {\n      className\n    } = this.props;\n    return __jsx(\"div\", {\n      className: classNames('form', className && className),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, this.props.children({\n      errors: this.state.errors,\n      submitFormWithValidation: this.submitFormWithValidation\n    }));\n  }\n\n}\n\nexport default Form;","map":{"version":3,"sources":["/Users/alexiastandish/Desktop/Freelance Clients/NewportMed/newportmed/components/contact-section/contact-form/form/index.js"],"names":["React","Component","DeepDiff","classNames","Form","constructor","props","schema","fields","validateSync","abortEarly","err","errors","inner","reduce","acc","currentError","params","path","push","message","length","state","prevErrors","validateAllFields","validationSchema","submitForm","setState","componentDidUpdate","prevProps","prevState","validatePrevFields","errDiff","render","className","children","submitFormWithValidation"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport DeepDiff from 'deep-diff';\nimport classNames from 'classnames';\n\nclass Form extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errors: null,\n      prevErrors: {}\n    };\n  }\n\n  validateAllFields = (schema, fields) => {\n    try {\n      schema.validateSync(fields, { abortEarly: false });\n      return null;\n    } catch (err) {\n      const errors = err.inner.reduce((acc, currentError) => {\n        if (acc[currentError.params.path]) {\n          acc[currentError.params.path].push(currentError.message);\n          return acc;\n        } else {\n          acc[currentError.params.path] = [currentError.message];\n          return acc;\n        }\n      }, {});\n      return Object.keys(errors).length > 0 ? errors : null;\n    }\n  };\n\n  validatePrevFields = (schema, fields) => {\n    try {\n      schema.validateSync(fields, { abortEarly: false });\n      return null;\n    } catch (err) {\n      const errors = err.inner.reduce((acc, currentError) => {\n        if (!this.state.prevErrors[currentError.params.path]) {\n          return acc;\n        }\n\n        if (acc[currentError.params.path]) {\n          acc[currentError.params.path].push(currentError.message);\n          return acc;\n        } else {\n          acc[currentError.params.path] = [currentError.message];\n          return acc;\n        }\n      }, {});\n      return Object.keys(errors).length > 0 ? errors : null;\n    }\n  };\n\n  submitFormWithValidation = () => {\n    const errors = this.validateAllFields(\n      this.props.validationSchema,\n      this.props.fields\n    );\n    if (!errors) {\n      return this.props.submitForm();\n    }\n    this.setState({\n      errors,\n      prevErrors: errors\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const errors = this.validatePrevFields(\n      this.props.validationSchema,\n      this.props.fields\n    );\n    const errDiff = DeepDiff(errors, this.state.errors);\n    if (errDiff) {\n      this.setState({\n        errors\n      });\n    }\n  }\n\n  render() {\n    const { className } = this.props;\n    return (\n      <div className={classNames('form', className && className)}>\n        {this.props.children({\n          errors: this.state.errors,\n          submitFormWithValidation: this.submitFormWithValidation\n        })}\n      </div>\n    );\n  }\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}