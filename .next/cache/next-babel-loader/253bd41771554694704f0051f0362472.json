{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/alexiastandish/Desktop/Freelance Clients/NewportMed/newportmed/components/contact-section/contact-form/form/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport DeepDiff from 'deep-diff';\nimport classNames from 'classnames';\n\nvar Form =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Form, _Component);\n\n  function Form(props) {\n    var _this;\n\n    _classCallCheck(this, Form);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Form).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"validateAllFields\", function (schema, fields) {\n      try {\n        schema.validateSync(fields, {\n          abortEarly: false\n        });\n        return null;\n      } catch (err) {\n        var errors = err.inner.reduce(function (acc, currentError) {\n          if (acc[currentError.params.path]) {\n            acc[currentError.params.path].push(currentError.message);\n            return acc;\n          } else {\n            acc[currentError.params.path] = [currentError.message];\n            return acc;\n          }\n        }, {});\n        return _Object$keys(errors).length > 0 ? errors : null;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"validatePrevFields\", function (schema, fields) {\n      try {\n        schema.validateSync(fields, {\n          abortEarly: false\n        });\n        return null;\n      } catch (err) {\n        var errors = err.inner.reduce(function (acc, currentError) {\n          if (!_this.state.prevErrors[currentError.params.path]) {\n            return acc;\n          }\n\n          if (acc[currentError.params.path]) {\n            acc[currentError.params.path].push(currentError.message);\n            return acc;\n          } else {\n            acc[currentError.params.path] = [currentError.message];\n            return acc;\n          }\n        }, {});\n        return _Object$keys(errors).length > 0 ? errors : null;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"submitFormWithValidation\", function () {\n      var errors = _this.validateAllFields(_this.props.validationSchema, _this.props.fields);\n\n      if (!errors) {\n        return _this.props.submitForm();\n      }\n\n      _this.setState({\n        errors: errors,\n        prevErrors: errors\n      });\n    });\n\n    _this.state = {\n      errors: null,\n      prevErrors: {}\n    };\n    return _this;\n  }\n\n  _createClass(Form, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var errors = this.validatePrevFields(this.props.validationSchema, this.props.fields);\n      var errDiff = DeepDiff(errors, this.state.errors);\n\n      if (errDiff) {\n        this.setState({\n          errors: errors\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var className = this.props.className;\n      return __jsx(\"div\", {\n        className: classNames('form', className && className),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, this.props.children({\n        errors: this.state.errors,\n        submitFormWithValidation: this.submitFormWithValidation\n      }));\n    }\n  }]);\n\n  return Form;\n}(Component);\n\nexport default Form;","map":{"version":3,"sources":["/Users/alexiastandish/Desktop/Freelance Clients/NewportMed/newportmed/components/contact-section/contact-form/form/index.js"],"names":["React","Component","DeepDiff","classNames","Form","props","schema","fields","validateSync","abortEarly","err","errors","inner","reduce","acc","currentError","params","path","push","message","length","state","prevErrors","validateAllFields","validationSchema","submitForm","setState","prevProps","prevState","validatePrevFields","errDiff","className","children","submitFormWithValidation"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport DeepDiff from 'deep-diff';\nimport classNames from 'classnames';\n\nclass Form extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errors: null,\n      prevErrors: {}\n    };\n  }\n\n  validateAllFields = (schema, fields) => {\n    try {\n      schema.validateSync(fields, { abortEarly: false });\n      return null;\n    } catch (err) {\n      const errors = err.inner.reduce((acc, currentError) => {\n        if (acc[currentError.params.path]) {\n          acc[currentError.params.path].push(currentError.message);\n          return acc;\n        } else {\n          acc[currentError.params.path] = [currentError.message];\n          return acc;\n        }\n      }, {});\n      return Object.keys(errors).length > 0 ? errors : null;\n    }\n  };\n\n  validatePrevFields = (schema, fields) => {\n    try {\n      schema.validateSync(fields, { abortEarly: false });\n      return null;\n    } catch (err) {\n      const errors = err.inner.reduce((acc, currentError) => {\n        if (!this.state.prevErrors[currentError.params.path]) {\n          return acc;\n        }\n\n        if (acc[currentError.params.path]) {\n          acc[currentError.params.path].push(currentError.message);\n          return acc;\n        } else {\n          acc[currentError.params.path] = [currentError.message];\n          return acc;\n        }\n      }, {});\n      return Object.keys(errors).length > 0 ? errors : null;\n    }\n  };\n\n  submitFormWithValidation = () => {\n    const errors = this.validateAllFields(\n      this.props.validationSchema,\n      this.props.fields\n    );\n    if (!errors) {\n      return this.props.submitForm();\n    }\n    this.setState({\n      errors,\n      prevErrors: errors\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const errors = this.validatePrevFields(\n      this.props.validationSchema,\n      this.props.fields\n    );\n    const errDiff = DeepDiff(errors, this.state.errors);\n    if (errDiff) {\n      this.setState({\n        errors\n      });\n    }\n  }\n\n  render() {\n    const { className } = this.props;\n    return (\n      <div className={classNames('form', className && className)}>\n        {this.props.children({\n          errors: this.state.errors,\n          submitFormWithValidation: this.submitFormWithValidation\n        })}\n      </div>\n    );\n  }\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}